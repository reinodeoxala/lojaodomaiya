<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Od√≤m√°√¨y√† Artigos Religiosos</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">
<style>
:root{
  --azul:#0b2c4a;
  --azul2:#123f66;
  --dourado:#f4c430;
  --bg:#f5f7fb;
  --card:#fff;
  --cart-bg:#fafafa;
  --shadow:rgba(0,0,0,.15);
  --hover:#e6f0fb;
}
*{margin:0;padding:0;box-sizing:border-box;font-family:Montserrat,sans-serif;}
body{background:var(--bg);padding-bottom:100px;color:#111;transition:0.3s;}
header{background:linear-gradient(135deg,#06192c,#0b2c4a);color:#fff;padding:25px 20px 35px;border-bottom-left-radius:30px;border-bottom-right-radius:30px;text-align:center;}
header h1{font-size:22px;font-weight:700;letter-spacing:1px;}
header p{font-size:13px;opacity:.9;margin-top:6px;}
header a{color:var(--dourado);text-decoration:none;font-size:13px;display:inline-block;margin-top:6px;}

/* SEARCH */
.search{margin:-20px 16px 15px;background:#fff;border-radius:14px;padding:12px;display:flex;gap:8px;box-shadow:0 8px 20px var(--shadow);}
.search input, .search select{flex:1;border:none;outline:none;font-size:14px;padding:6px;border-radius:10px;}

/* TABS */
.tabs{display:flex;overflow-x:auto;gap:10px;padding:10px 16px;}
.tabs button{background:#fff;border:none;padding:8px 14px;border-radius:20px;font-size:13px;white-space:nowrap;box-shadow:0 4px 12px var(--shadow);cursor:pointer;transition:0.3s;}
.tabs button.active{background:var(--azul); color:#fff;}

/* PRODUTOS */
.produtos{display:grid;grid-template-columns:repeat(auto-fit,minmax(160px,1fr));gap:14px;padding:0 16px;}
.produto{background:var(--card);border-radius:16px;padding:10px;box-shadow:0 6px 18px var(--shadow);display:flex;flex-direction:column;transition:0.3s;}
.produto:hover{transform:translateY(-3px); background:var(--hover);}
.produto img{width:100%;border-radius:12px;margin-bottom:8px;height:150px;object-fit:cover;}
.produto h3{font-size:14px;margin-bottom:4px;}
.preco{font-weight:700;color:var(--azul2);font-size:14px;margin-bottom:4px;}
.qtd{display:flex;align-items:center;justify-content:space-between;margin:6px 0;}
.qtd button{width:28px;height:28px;border-radius:50%;border:none;background:#ddd;font-size:16px;cursor:pointer;transition:0.2s;}
.qtd button:hover{background:#ccc;}
.qtd input{width:50px;text-align:center;border-radius:6px;border:1px solid #ccc;padding:4px;}
.add{margin-top:auto;background:var(--azul);color:#fff;border:none;padding:8px;border-radius:20px;font-size:13px;cursor:pointer;transition:0.3s;}
.add:hover{background:var(--azul2);}

/* CART FLUTUANTE */
#cart{
  position:fixed;
  bottom:20px;
  right:20px;
  width:320px;
  max-height:80vh;
  background:var(--cart-bg);
  border-radius:22px;
  box-shadow:0 10px 30px var(--shadow);
  padding:16px;
  transition:transform 0.3s, opacity 0.3s;
  transform:translateY(120%);
  opacity:0;
  z-index:1000;
}
#cart.show{transform:translateY(0);opacity:1;}
.cart-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px;font-size:16px;font-weight:600;}
.cart-item{display:flex;align-items:center;justify-content:space-between;margin:8px 0;background:#fff;border-radius:12px;padding:8px;box-shadow:0 2px 6px var(--shadow);}
.cart-item img{width:50px;height:50px;object-fit:cover;border-radius:8px;margin-right:8px;}
.cart-item-info{flex:1;}
.cart-item-info b{display:block;font-size:14px;}
.cart-item-info small{font-size:12px;color:#666;}
.cart-item-controls{display:flex;align-items:center;gap:6px;}
.cart-item-controls button{width:28px;height:28px;border-radius:50%;border:none;background:#ddd;cursor:pointer;font-weight:700;}
.cart-item-controls button:hover{background:#ccc;}
.cart-item-remove{margin-left:6px;background:#ff4d4d;color:#fff;border:none;border-radius:6px;cursor:pointer;font-size:12px;padding:2px 6px;}
.cart-footer{margin-top:12px;text-align:right;}
.cart-footer button{
  width:100%;
  padding:12px;
  background:#25d366;
  border:none;
  color:#fff;
  font-size:16px;
  border-radius:25px;
  cursor:pointer;
  display:flex;
  align-items:center;
  justify-content:center;
  gap:6px;
}
.cart-footer button:hover{background:#1ebe5b;}

/* NAV BOTTOM */
.nav{
  position:fixed;
  bottom:0;
  left:0;
  width:100%;
  background:var(--azul);
  color:#fff;
  display:flex;
  justify-content:center;
  align-items:center;
  padding:12px 0;
  box-shadow:0 -5px 20px var(--shadow);
  cursor:pointer;
  font-size:14px;
}
.nav span{font-weight:600;}

/* ADMIN PANEL DISCRETO */
.admin-panel{display:none;padding:20px;background:#fff;border-radius:12px;box-shadow:0 6px 18px var(--shadow);position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);width:90%;max-width:500px;z-index:2000;}
.admin-panel.show{display:block;}
.admin-panel h2{margin-bottom:10px;}
.admin-panel table{width:100%;border-collapse:collapse;}
.admin-panel td, .admin-panel th{padding:8px;border-bottom:1px solid #ddd;}
.admin-panel input[type=number]{width:60px;padding:4px;border-radius:6px;border:1px solid #ccc;}
.admin-close{position:absolute;top:10px;right:12px;font-size:18px;cursor:pointer;color:#999;}
.admin-close:hover{color:#333;}
</style>
</head>
<body>

<header>
<h1>Od√≤m√°√¨y√† Artigos Religiosos</h1>
<p>Artigos com fundamento, respeito e tradi√ß√£o</p>
<a target="_blank" href="https://www.google.com/maps/search/?api=1&query=Rua+Sete+de+Agosto,+28,+Passo+Fundo+RS">üìç Rua Sete de Agosto, 28 ‚Äì Passo Fundo/RS</a>
<p>üïí Seg‚ÄìSex: 10h‚Äì12h | 13:30‚Äì19h ‚Ä¢ S√°b: 10h‚Äì12h | 13:30‚Äì17h</p>
</header>

<div class="search">
<input placeholder="Pesquisar produtos‚Ä¶" oninput="buscar(this.value)">
<select onchange="ordenar(this.value)">
<option value="">Ordenar</option>
<option value="menor">Menor pre√ßo</option>
<option value="maior">Maior pre√ßo</option>
</select>
</div>

<div class="tabs" id="tabs"></div>
<div class="produtos" id="produtos"></div>

<!-- CART -->
<div id="cart">
<div class="cart-header">
<b>üõí Seu carrinho</b>
<button onclick="toggleCart()">‚úñ</button>
</div>
<div id="cartItems"></div>
<div class="cart-footer">
<button onclick="checkout()">
<img src="https://cdn-icons-png.flaticon.com/512/124/124034.png" style="width:20px;"> Finalizar Compra
</button>
</div>
</div>

<div class="nav" id="navFooter"><span>@odomaia_artigosreligiosos</span></div>

<!-- ADMIN -->
<div class="admin-panel" id="adminPanel">
<span class="admin-close" onclick="toggleAdmin()">‚úñ</span>
<h2>Painel Administrativo</h2>
<input id="buscaAdmin" placeholder="Buscar produto" oninput="buscarAdmin()">
<table>
<thead><tr><th>Produto</th><th>Pre√ßo</th><th>Desconto (R$)</th><th>Estoque</th><th>Salvar</th></tr></thead>
<tbody id="adminTabela"></tbody>
</table>
</div>

<script>
// ===== Produtos exemplo com desconto persistente =====
let produtos = [
{id:"1",nome:"Guia de Iemanj√°",preco:25,desconto:0,estoque:15,img:"https://i.imgur.com/qh0oVgT.jpg",cat:"Guias"},
{id:"2",nome:"Guia de Oxal√°",preco:25,desconto:0,estoque:12,img:"https://i.imgur.com/9V8G6ZY.jpg",cat:"Guias"},
{id:"3",nome:"Guia de Ogum",preco:25,desconto:0,estoque:10,img:"https://i.imgur.com/3cYrXcD.jpg",cat:"Guias"},
{id:"4",nome:"Guia de Oxum",preco:25,desconto:0,estoque:8,img:"https://i.imgur.com/VxPENmj.jpg",cat:"Guias"},
{id:"5",nome:"Vela Azul",preco:10,desconto:0,estoque:20,img:"https://i.imgur.com/fkqQ1Uq.jpg",cat:"Velas"},
{id:"6",nome:"Vela Vermelha",preco:10,desconto:0,estoque:20,img:"https://i.imgur.com/qHR2Jaf.jpg",cat:"Velas"},
{id:"7",nome:"Vela Branca",preco:10,desconto:0,estoque:20,img:"https://i.imgur.com/IjNw1hA.jpg",cat:"Velas"},
{id:"8",nome:"Vela Amarela",preco:10,desconto:0,estoque:20,img:"https://i.imgur.com/0GZ7bDw.jpg",cat:"Velas"}
];

// Carregar descontos do localStorage
let descontosSalvos = JSON.parse(localStorage.getItem("descontos")||"{}");
produtos.forEach(p=>{
  if(descontosSalvos[p.id]!=null) p.desconto=descontosSalvos[p.id];
});

let carrinho={};

// ===== Render Produtos e Tabs =====
const produtosDiv=document.getElementById("produtos");
const tabsDiv=document.getElementById("tabs");
let categorias=[...new Set(produtos.map(p=>p.cat))];
categorias.forEach(cat=>{
  let btn=document.createElement("button");
  btn.textContent=cat;
  btn.onclick=()=>filtrar(cat);
  tabsDiv.appendChild(btn);
});

function renderProdutos(lista){
  produtosDiv.innerHTML="";
  lista.forEach(p=>{
    const precoFinal=(p.preco-p.desconto).toFixed(2);
    const div=document.createElement("div");
    div.className="produto";
    div.innerHTML=`
      <img src="${p.img}">
      <h3>${p.nome}</h3>
      <div class="preco">R$ ${precoFinal}${p.desconto>0?` <span style="color:#f00;font-size:12px;">(R$ ${p.desconto} off)</span>`:""}</div>
      Estoque: ${p.estoque}
      <div class="qtd">
        <button onclick="mudarQtd('${p.id}',-1)">-</button>
        <input type="number" min="1" value="1" id="q_${p.id}">
        <button onclick="mudarQtd('${p.id}',1)">+</button>
      </div>
      <button class="add" onclick="addCarrinho('${p.id}')">Adicionar</button>`;
    produtosDiv.appendChild(div);
  });
}
renderProdutos(produtos);

function filtrar(cat){renderProdutos(produtos.filter(p=>p.cat===cat));}
function buscar(txt){renderProdutos(produtos.filter(p=>p.nome.toLowerCase().includes(txt.toLowerCase())));}
function ordenar(tipo){
  let lista=[...produtos];
  if(tipo==="menor") lista.sort((a,b)=>a.preco-b.preco);
  if(tipo==="maior") lista.sort((a,b)=>b.preco-a.preco);
  renderProdutos(lista);
}

// ===== Carrinho =====
function mudarQtd(id,delta){
  const inp=document.getElementById("q_"+id);
  inp.value=Math.max(1,Number(inp.value)+delta);
}

function addCarrinho(id){
  const qtd=Number(document.getElementById("q_"+id).value);
  const p=produtos.find(x=>x.id===id);
  if(!p || p.estoque<qtd){alert("Sem estoque suficiente"); return;}
  carrinho[id]=(carrinho[id]||0)+qtd;
  p.estoque-=qtd;
  renderProdutos(produtos);
  atualizarCarrinho();
  toggleCart(true);
}

function atualizarCarrinho(){
  const cartItems=document.getElementById("cartItems");
  cartItems.innerHTML="";
  let total=0;
  Object.entries(carrinho).forEach(([id,q])=>{
    const p=produtos.find(x=>x.id===id);
    const subtotal=(p.preco-p.desconto)*q;
    total+=subtotal;
    const div=document.createElement("div");
    div.className="cart-item";
    div.innerHTML=`
      <img src="${p.img}"><div class="cart-item-info"><b>${p.nome}</b><small>R$ ${subtotal.toFixed(2)}</small></div>
      <div class="cart-item-controls">
        <button onclick="mudarQtdCarrinho('${id}',-1)">-</button>
        <span>${q}</span>
        <button onclick="mudarQtdCarrinho('${id}',1)">+</button>
        <button class="cart-item-remove" onclick="removerCarrinho('${id}')">‚úñ</button>
      </div>`;
    cartItems.appendChild(div);
  });
  document.querySelector("#cart .cart-footer b")?.remove();
  document.getElementById("total").innerText=total.toFixed(2);
}

function mudarQtdCarrinho(id,delta){
  const p=produtos.find(x=>x.id===id);
  if(!p) return;
  const qtdAtual=carrinho[id];
  const novaQtd=qtdAtual+delta;
  if(novaQtd<1) return;
  if(p.estoque<delta){alert("Sem estoque suficiente"); return;}
  carrinho[id]=novaQtd;
  p.estoque-=delta;
  renderProdutos(produtos);
  atualizarCarrinho();
}

function removerCarrinho(id){
  const qtd=carrinho[id];
  produtos.find(p=>p.id===id).estoque+=qtd;
  delete carrinho[id];
  renderProdutos(produtos);
  atualizarCarrinho();
}

function toggleCart(force=false){
  const c=document.getElementById("cart");
  if(force) c.classList.add("show"); else c.classList.toggle("show");
}

// ===== Checkout =====
function checkout(){
  if(Object.keys(carrinho).length===0){alert("Carrinho vazio"); return;}
  const opc=prompt("Deseja Retirar os produtos (R) ou Entrega (E)?").toUpperCase();
  let msg="Ol√°! Quero comprar:\n";
  Object.entries(carrinho).forEach(([id,q])=>{
    const p=produtos.find(x=>x.id===id);
    msg+=`- ${p.nome} x${q}\n`;
  });
  if(opc==="E"){
    const end=prompt("Digite o endere√ßo completo para entrega:");
    msg+="Endere√ßo: "+end;
  } else{
    msg+="Retirada no endere√ßo: Rua Sete de Agosto, 28 ‚Äì Passo Fundo/RS";
  }
  window.open("https://wa.me/5545996048808?text="+encodeURIComponent(msg));
}

// ===== Admin =====
let adminPanel=document.getElementById("adminPanel");
let clicks=0;
document.getElementById("navFooter").onclick=function(){
  clicks++;
  if(clicks>=10){toggleAdmin(); clicks=0;}
};
function toggleAdmin(){adminPanel.classList.toggle("show");}

const adminTabela=document.getElementById("adminTabela");
function renderAdmin(){
  adminTabela.innerHTML="";
  produtos.forEach(p=>{
    const tr=document.createElement("tr");
    tr.innerHTML=`
      <td>${p.nome}</td>
      <td><input type="number" id="preco_${p.id}" value="${p.preco}"></td>
      <td><input type="number" id="desconto_${p.id}" value="${p.desconto}"></td>
      <td><input type="number" id="estoque_${p.id}" value="${p.estoque}"></td>
      <td><button onclick="salvarAdmin('${p.id}')">Salvar</button></td>`;
    adminTabela.appendChild(tr);
  });
}
renderAdmin();

function salvarAdmin(id){
  const p=produtos.find(x=>x.id===id);
  p.preco=Number(document.getElementById("preco_"+id).value);
  p.desconto=Number(document.getElementById("desconto_"+id).value);
  p.estoque=Number(document.getElementById("estoque_"+id).value);
  // salvar desconto localStorage
  let descontosSalvos = JSON.parse(localStorage.getItem("descontos")||"{}");
  descontosSalvos[id]=p.desconto;
  localStorage.setItem("descontos",JSON.stringify(descontosSalvos));
  renderProdutos(produtos);
  atualizarCarrinho();
}

// ===== Buscar admin =====
function buscarAdmin(){
  const txt=document.getElementById("buscaAdmin").value.toLowerCase();
  const filtered=produtos.filter(p=>p.nome.toLowerCase().includes(txt));
  adminTabela.innerHTML="";
  filtered.forEach(p=>{
    const tr=document.createElement("tr");
    tr.innerHTML=`
      <td>${p.nome}</td>
      <td><input type="number" id="preco_${p.id}" value="${p.preco}"></td>
      <td><input type="number" id="desconto_${p.id}" value="${p.desconto}"></td>
      <td><input type="number" id="estoque_${p.id}" value="${p.estoque}"></td>
      <td><button onclick="salvarAdmin('${p.id}')">Salvar</button></td>`;
    adminTabela.appendChild(tr);
  });
}
</script>
</body>
</html>
